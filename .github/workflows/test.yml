name: Unit Tests

on:
  push:
    branches:
      - master
  pull_request:
    branches:
      - master

jobs:
  setup-conda-environment:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout code
      uses: actions/checkout@v4  # Latest version of the checkout action

    - name: Set up Miniconda
      uses: conda-incubator/setup-miniconda@v3  # Use the miniconda setup action
      with:
        miniconda-version: "latest"
        auto-activate-base: false

    - name: Install Conda dependencies
      run: |
        conda create --name CLEDBenv python=3.13
        conda init
        conda activate CLEDBenv
        conda install numpy=2.1 numba=0.61 scipy=1.15 astropy=7.0 ipython tqdm            

    - name: Run tests
      run: |
        conda activate CLEDBenv
        pytest  # Runs your tests with pytest
